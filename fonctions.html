

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4.4. Fonctions &mdash; Documentation CoursPythonCPGE </title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/translations.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/jupyter-sphinx.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="5. Un peu de théorie" href="theorie.html" />
    <link rel="prev" title="4.3. Boucles" href="boucles.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> CoursPythonCPGE
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="types_operateurs_variables.html">1. Types, opérateurs et variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="types_composes.html">2. Types composés</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">3. Entrée/sortie</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="algorithmique.html">4. Rudiments d’algorithmique</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="indentation.html">4.1. Indentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tests.html">4.2. Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="boucles.html">4.3. Boucles</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.4. Fonctions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="theorie.html">5. Un peu de théorie</a></li>
<li class="toctree-l1"><a class="reference internal" href="recursivite.html">6. Récursivité</a></li>
<li class="toctree-l1"><a class="reference internal" href="algoclassiques.html">7. Algorithmes classiques</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="appendice_preuves_complexites.html">Preuves et complexités</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossaire.html">Glossaire</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CoursPythonCPGE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="algorithmique.html"><span class="section-number">4. </span>Rudiments d’algorithmique</a> &raquo;</li>
        
      <li><span class="section-number">4.4. </span>Fonctions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/fonctions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fonctions">
<h1><span class="section-number">4.4. </span>Fonctions<a class="headerlink" href="#fonctions" title="Lien permanent vers ce titre">¶</a></h1>
<p>Une fonction est un bloc d’instructions que l’on peut appeler à tout moment d’un programme. Les fonctions ont plusieurs intérêts, notamment :</p>
<blockquote>
<div><ul class="simple">
<li><p>la réutilisation du code : éviter de répéter les mêmes séries d’instructions à plusieurs endroits d’un programme ;</p></li>
<li><p>la modularité : découper une tâche complexe en plusieurs sous-tâches plus simples.</p></li>
</ul>
</div></blockquote>
<div class="section" id="definir-une-fonction">
<h2><span class="section-number">4.4.1. </span>Définir une fonction<a class="headerlink" href="#definir-une-fonction" title="Lien permanent vers ce titre">¶</a></h2>
<p>Au cours des chapitres précédents, on a déjà rencontré de nombreuses fonctions telles que <code class="code docutils literal notranslate"><span class="pre">print</span></code> ou <code class="code docutils literal notranslate"><span class="pre">len</span></code>. Chacune de ces fonctions reçoit un argument et effectue une action (la fonction <code class="code docutils literal notranslate"><span class="pre">print</span></code> affiche un objet à l’écran) ou renvoie une valeur (la fonction <code class="code docutils literal notranslate"><span class="pre">len</span></code> renvoie la taille d’un itérable).</p>
<p>Jusqu’à maintenant, on s’est contenté de faire appel à des fonctions prédéfinies. Mais on peut également définir ses propres fonctions : il faut alors <strong>déclarer</strong> ces fonctions avant de les utiliser. De manière générale, la syntaxe d’une déclaration de fonctions est la suivante.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="o">&lt;</span><span class="n">nom_fonction</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">paramètres</span><span class="o">&gt;</span><span class="p">):</span>   <span class="c1"># En-tête de la fonction</span>
    <span class="o">&lt;</span><span class="n">instruction1</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">instruction2</span><span class="o">&gt;</span>                  <span class="c1"># Corps de la fonction</span>
    <span class="o">...</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="n">valeur</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>On décrit dans le <em>corps</em> de la fonction les traitements à effectuer sur les paramètres et on spécifie la valeur que doit renvoyer la fonction.</p>
<p>Considérons l’exemple simple suivant.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">factorielle</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
   <span class="o">...</span><span class="p">:</span>     <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
   <span class="o">...</span><span class="p">:</span>     <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
   <span class="o">...</span><span class="p">:</span>         <span class="n">a</span> <span class="o">*=</span> <span class="n">k</span>
   <span class="o">...</span><span class="p">:</span>     <span class="k">return</span> <span class="n">a</span>
   <span class="o">...</span><span class="p">:</span> 
</pre></div>
</div>
<p>La fonction <code class="code docutils literal notranslate"><span class="pre">factorielle</span></code> prend en argument un objet <code class="code docutils literal notranslate"><span class="pre">n</span></code> (que l’on supposera être un entier naturel), calcule la factorielle de <code class="code docutils literal notranslate"><span class="pre">n</span></code> à l’aide d’une variable <code class="code docutils literal notranslate"><span class="pre">a</span></code> et renvoie cette valeur.</p>
<p>On constate que rien ne se passe lorsque la fonction est déclarée. Il faut <strong>appeler</strong> la fonction en fournissant une valeur à l’entier <code class="code docutils literal notranslate"><span class="pre">n</span></code> pour que le code soit exécuté.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">factorielle</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="mi">120</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">factorielle</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="mi">5040</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Il faut bien faire la différence entre <strong>la déclaration</strong> et <strong>l’appel</strong> de la fonction. Lorsqu’une fonction est <strong>déclarée</strong>, aucun code n’est exécuté. Il faut <strong>appeler</strong> la fonction pour que le code soit exécuté.</p>
</div>
</div>
<div class="section" id="l-instruction-return">
<h2><span class="section-number">4.4.2. </span>L’instruction <code class="code docutils literal notranslate"><span class="pre">return</span></code><a class="headerlink" href="#l-instruction-return" title="Lien permanent vers ce titre">¶</a></h2>
<p>On « sort » de la fonction dès qu’on recontre une instruction <code class="code docutils literal notranslate"><span class="pre">return</span></code> : en particulier, les instructions suivant un <code class="code docutils literal notranslate"><span class="pre">return</span></code> ne sont pas exécutées.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
   <span class="o">...</span><span class="p">:</span>     <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
   <span class="o">...</span><span class="p">:</span>         <span class="k">return</span> <span class="s2">&quot;n est un multiple de 2&quot;</span>
   <span class="o">...</span><span class="p">:</span>     <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span><span class="mi">0</span><span class="p">:</span>
   <span class="o">...</span><span class="p">:</span>         <span class="k">return</span> <span class="s2">&quot;n est un multiple de 3&quot;</span>
   <span class="o">...</span><span class="p">:</span>     <span class="k">return</span> <span class="s2">&quot;Bidon&quot;</span>
   <span class="o">...</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">test</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="s1">&#39;n est un multiple de 2&#39;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">test</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="s1">&#39;n est un multiple de 3&#39;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">test</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="s1">&#39;n est un multiple de 2&#39;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">test</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="s1">&#39;Bidon&#39;</span>
</pre></div>
</div>
<p>On peut cependant utiliser ceci à notre avantage : par exemple, pour sortir d’une boucle <code class="code docutils literal notranslate"><span class="pre">for</span></code> avant d’avoir accompli toutes les itérations.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span><span class="p">,</span> <span class="n">floor</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">est_premier</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
   <span class="o">....</span><span class="p">:</span>         <span class="k">return</span> <span class="kc">False</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">floor</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>         <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">d</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
   <span class="o">....</span><span class="p">:</span>             <span class="k">return</span> <span class="kc">False</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="kc">True</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">11</span><span class="p">]:</span> <span class="nb">print</span><span class="p">([(</span><span class="n">n</span><span class="p">,</span> <span class="n">est_premier</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)])</span>
<span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="kc">False</span><span class="p">)]</span>
</pre></div>
</div>
<p>Une fonction peut ne pas contenir d’instruction <code class="code docutils literal notranslate"><span class="pre">return</span></code> ou peut ne renvoyer aucune valeur. En fait, si on ne renvoie pas explicitement de valeur, Python renverra par défaut la valeur particulière <code class="code docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
   <span class="o">....</span><span class="p">:</span> 
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">13</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="kc">None</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="mi">2</span> <span class="o">*</span> <span class="n">x</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span>
   <span class="o">....</span><span class="p">:</span> 
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="kc">None</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Une erreur de débutant consiste à confondre les utilisations de <code class="code docutils literal notranslate"><span class="pre">print</span></code> et <code class="code docutils literal notranslate"><span class="pre">return</span></code> : une fonction ne comportant qu’un <code class="code docutils literal notranslate"><span class="pre">print</span></code> et pas de <code class="code docutils literal notranslate"><span class="pre">return</span></code> ne fera qu’afficher un résultat à l’écran mais ne renverra aucune valeur.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">16</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">bidon</span><span class="p">():</span>
   <span class="o">....</span><span class="p">:</span>     <span class="nb">print</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="mi">2</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="n">a</span> <span class="o">=</span> <span class="n">bidon</span><span class="p">()</span> <span class="c1"># La fonction bidon affiche bien 1</span>
<span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">18</span><span class="p">]:</span> <span class="n">a</span>           <span class="c1"># Mais elle a renvoyé la valeur 2</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">18</span><span class="p">]:</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
<p>La plupart du temps, on préfèrera utiliser utiliser <code class="code docutils literal notranslate"><span class="pre">return</span></code> plutôt que <code class="code docutils literal notranslate"><span class="pre">print</span></code> : l’objet affiché par <code class="code docutils literal notranslate"><span class="pre">print</span></code> est en quelque sorte « perdu » pour le reste du programme s’il n’a pas été renvoyé via <code class="code docutils literal notranslate"><span class="pre">return</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">19</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">liste_carres1</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="nb">print</span><span class="p">([</span><span class="n">k</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)])</span>
   <span class="o">....</span><span class="p">:</span> 
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">20</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">liste_carres2</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="p">[</span><span class="n">k</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
   <span class="o">....</span><span class="p">:</span> 
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="c1"># Avec la première version, la liste des carrés est affichée mais on ne peut plus rien en faire</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">21</span><span class="p">]:</span> <span class="n">liste_carres1</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>

<span class="c1"># En effet, la fonction renvoie None</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">22</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="n">liste_carres1</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="kc">None</span>

<span class="c1"># Avec la deuxième version, on peut par exemple calculer la somme des carrés des premiers entiers</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">23</span><span class="p">]:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">liste_carres2</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">23</span><span class="p">]:</span> <span class="mi">385</span>
</pre></div>
</div>
</div>
<div class="section" id="parametres-et-arguments">
<h2><span class="section-number">4.4.3. </span>Paramètres et arguments<a class="headerlink" href="#parametres-et-arguments" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une fonction peut avoir zéro, un ou plusieurs paramètres <a class="footnote-reference brackets" href="#zeroparametre" id="id1">1</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Bien que les termes <em>paramètres</em> et <em>arguments</em> soient souvent confondus, il existe une nuance dont nous tiendrons compte dans ce chapitre : les <em>paramètres</em> sont les noms intervenant dans l’en-tête de la fonction tandis que les <em>arguments</em> sont les valeurs passées à la fonction lors de son appel.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">24</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>      <span class="c1"># Les paramètres sont a et b</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">25</span><span class="p">]:</span> <span class="n">add</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>          <span class="c1"># Les arguments sont 5 et 10</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">25</span><span class="p">]:</span> <span class="mi">15</span>
</pre></div>
</div>
</div>
<p>De même que pour les variables, les noms des paramètres doivent refléter leur utilisation pour que le code soit plus lisible. Par ailleurs, on peut passer des arguments à une fonction en utilisant les noms des paramètres, ce qui rend le code encore plus explicite.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">26</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">nom_complet</span><span class="p">(</span><span class="n">prenom</span><span class="p">,</span> <span class="n">nom</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">prenom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="n">prenom</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">nom</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">27</span><span class="p">]:</span> <span class="n">nom_complet</span><span class="p">(</span><span class="n">prenom</span><span class="o">=</span><span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="n">nom</span><span class="o">=</span><span class="s1">&#39;bond&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">27</span><span class="p">]:</span> <span class="s1">&#39;James BOND&#39;</span>
</pre></div>
</div>
<p>L’emploi d'<em>arguments nommés</em> permet de passer les arguments dans un ordre différent de l’ordre des paramètres dans l’en-tête de la fonction.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">28</span><span class="p">]:</span> <span class="n">nom_complet</span><span class="p">(</span><span class="n">nom</span><span class="o">=</span><span class="s1">&#39;PrOuSt&#39;</span><span class="p">,</span> <span class="n">prenom</span><span class="o">=</span><span class="s1">&#39;MARcel&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">28</span><span class="p">]:</span> <span class="s1">&#39;Marcel PROUST&#39;</span>
</pre></div>
</div>
<p>Il est possible de donner des valeurs par défaut aux paramètres d’une fonction : les arguments correspondants ne sont plus alors requis lors de l’appel de la fonction.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">29</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">nom_complet</span><span class="p">(</span><span class="n">prenom</span><span class="o">=</span><span class="s1">&#39;Joe&#39;</span><span class="p">,</span> <span class="n">nom</span><span class="o">=</span><span class="s1">&#39;Bob&#39;</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">prenom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="n">prenom</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">nom</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">30</span><span class="p">]:</span> <span class="n">nom_complet</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">30</span><span class="p">]:</span> <span class="s1">&#39;Joe BOB&#39;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">31</span><span class="p">]:</span> <span class="n">nom_complet</span><span class="p">(</span><span class="s1">&#39;ulysse&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">31</span><span class="p">]:</span> <span class="s1">&#39;Ulysse BOB&#39;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">32</span><span class="p">]:</span> <span class="n">nom_complet</span><span class="p">(</span><span class="n">nom</span><span class="o">=</span><span class="s1">&#39;capet&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">32</span><span class="p">]:</span> <span class="s1">&#39;Joe CAPET&#39;</span>
</pre></div>
</div>
<p>Dans l’en-tête d’une fonction les paramètres avec des valeurs par défaut doivent toujours <em>suivre</em> les paramètres sans valeurs par défaut sous peine de déclencher une erreur de syntaxe.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">33</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">toto</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">pass</span>
   <span class="o">....</span><span class="p">:</span> 
  <span class="n">File</span> <span class="s2">&quot;&lt;ipython-input-33-ff9b54c14016&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="k">def</span> <span class="nf">toto</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
             <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">non</span><span class="o">-</span><span class="n">default</span> <span class="n">argument</span> <span class="n">follows</span> <span class="n">default</span> <span class="n">argument</span>
</pre></div>
</div>
<p>Le but est d’éviter toute ambiguïté. En effet, quels seraient les arguments passés lors de l’appel de fonction <code class="code docutils literal notranslate"><span class="pre">toto(5,</span> <span class="pre">6)</span></code> ? <code class="code docutils literal notranslate"><span class="pre">a=1</span></code>, <code class="code docutils literal notranslate"><span class="pre">b=5</span></code> et <code class="code docutils literal notranslate"><span class="pre">c=6</span></code> ou bien <code class="code docutils literal notranslate"><span class="pre">a=5</span></code>, <code class="code docutils literal notranslate"><span class="pre">b=6</span></code> et <code class="code docutils literal notranslate"><span class="pre">c=2</span></code> ?</p>
</div>
<div class="section" id="portee-des-variables">
<h2><span class="section-number">4.4.4. </span>Portée des variables<a class="headerlink" href="#portee-des-variables" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une fonction peut utiliser des variables définies <strong>à l’extérieur</strong> de cette fonction.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">34</span><span class="p">]:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">35</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">x</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">36</span><span class="p">]:</span> <span class="n">f</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">36</span><span class="p">]:</span> <span class="mi">10</span>
</pre></div>
</div>
<p>On dit que les variables définies à l’extérieur d’une fonction sont des variables <strong>globales</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>De manière générale, il est plutôt déconseillé d’utiliser des variables globales à l’intérieur d’une fonction. Il est par exemple plus difficile de tester ou débugger une fonction faisant appel à des variables globales : en plus de chercher les bugs à l’intérieur de la fonction, il faudra examiner tous les endroits où ces variables globales sont potentiellement modifiées, ce qui peut devenir un vrai casse-tête dans un programme complexe.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Si on veut utiliser une variable globale à l’intérieur d’une fonction, il faut que celle-ci soit déclarée <strong>avant</strong> l’appel de cette fonction.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">37</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">b</span> <span class="o">*</span> <span class="n">x</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">38</span><span class="p">]:</span> <span class="n">f</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">38</span><span class="p">]:</span> <span class="mi">30</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">39</span><span class="p">]:</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
<p>Considérons maintenant l’exemple suivant.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">40</span><span class="p">]:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">41</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
   <span class="o">....</span><span class="p">:</span>     <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="kc">None</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">42</span><span class="p">]:</span> <span class="n">a</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">42</span><span class="p">]:</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">43</span><span class="p">]:</span> <span class="n">f</span><span class="p">()</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">44</span><span class="p">]:</span> <span class="n">a</span>   <span class="c1"># a vaut toujours 1</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">44</span><span class="p">]:</span> <span class="mi">1</span>
</pre></div>
</div>
<p>On dit que les variables à l’intérieur d’une fonction sont des variables <strong>locales</strong>. Cela signifie en particulier que des opérations effectuées sur une variable d’un certain nom <strong>à l’intérieur</strong> d’une fonction ne modifient pas une variable du même nom <strong>à l’extérieur</strong> de cette fonction.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On évitera cependant de donner des noms identiques à des variables locales et globales de manière à éviter toute confusion.</p>
</div>
<p>Quand il existe des variables locales et globales de même nom, la préférence est donnée aux variables locales à l’intérieur de la fonction.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">45</span><span class="p">]:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">46</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="n">a</span> <span class="o">=</span> <span class="mi">3</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">x</span>    <span class="c1"># la variable locale a est utilisée et non la variable globale a</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">47</span><span class="p">]:</span> <span class="n">f</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">47</span><span class="p">]:</span> <span class="mi">8</span>
</pre></div>
</div>
<p>On ne peut pas accéder à des variables locales à l’extérieur de la fonction où elles sont définies.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">48</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
   <span class="o">....</span><span class="p">:</span>     <span class="n">c</span> <span class="o">=</span> <span class="mi">2</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="kc">None</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">49</span><span class="p">]:</span> <span class="n">f</span><span class="p">()</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">50</span><span class="p">]:</span> <span class="n">c</span>   <span class="c1"># c est inconnu à l&#39;extérieur de la fonction</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">50</span><span class="p">]:</span> <span class="s1">&#39;t&#39;</span>
</pre></div>
</div>
<p>On peut donc également voir les variables locales comme des variables <em>temporaires</em> dont l’existence n’est assurée qu’à l’intérieur de la fonction où elles interviennent.</p>
<p>On peut néanmoins modifier une variable globale à l’intérieur d’une fonction : on utilise alors le mot-clé <code class="code docutils literal notranslate"><span class="pre">global</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">51</span><span class="p">]:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">52</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">global</span> <span class="n">a</span>
   <span class="o">....</span><span class="p">:</span>     <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="kc">None</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">53</span><span class="p">]:</span> <span class="n">a</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">53</span><span class="p">]:</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">54</span><span class="p">]:</span> <span class="n">f</span><span class="p">()</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">55</span><span class="p">]:</span> <span class="n">a</span>   <span class="c1"># a vaut bien 2</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">55</span><span class="p">]:</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Les paramètres d’une fonction ont également une portée locale. On ne peut accéder à une variable locale à l’extérieur de la fonction où elle est définie.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">56</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">c</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">57</span><span class="p">]:</span> <span class="n">c</span>   <span class="c1"># c est inconnu à l&#39;extérieur de la fonction</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">57</span><span class="p">]:</span> <span class="s1">&#39;t&#39;</span>
</pre></div>
</div>
<p>Enfin, un paramètre ne peut être déclaré comme variable global à l’intérieur d’une fonction.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">58</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">g</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>      <span class="k">global</span> <span class="n">g</span>
   <span class="o">....</span><span class="p">:</span> 
  <span class="n">File</span> <span class="s2">&quot;&lt;ipython-input-58-c03bf47315f9&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">2</span>
    <span class="k">global</span> <span class="n">g</span>
    <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">name</span> <span class="s1">&#39;g&#39;</span> <span class="ow">is</span> <span class="n">parameter</span> <span class="ow">and</span> <span class="k">global</span>
</pre></div>
</div>
</div>
<div class="section" id="fonctions-et-mutabilite">
<h2><span class="section-number">4.4.5. </span>Fonctions et mutabilité<a class="headerlink" href="#fonctions-et-mutabilite" title="Lien permanent vers ce titre">¶</a></h2>
<p>Considérons ce premier exemple où l’argument est un entier.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">59</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
   <span class="o">....</span><span class="p">:</span> 
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">60</span><span class="p">]:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">61</span><span class="p">]:</span> <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">62</span><span class="p">]:</span> <span class="n">a</span>           <span class="c1"># la variable a n&#39;est pas modifiée</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">62</span><span class="p">]:</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Et maintenant, un deuxième exemple où l’argument est une liste.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">63</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">li</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="n">li</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
   <span class="o">....</span><span class="p">:</span> 
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">64</span><span class="p">]:</span> <span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">65</span><span class="p">]:</span> <span class="n">g</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">66</span><span class="p">]:</span> <span class="n">lst</span>       <span class="c1"># la variable lst a été modifiée</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">66</span><span class="p">]:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>Le résultat du deuxième exemple peut sembler étrange puisqu’une variable globale a été modifiée à l’intérieur d’une fonction. Pour expliquer cette différence de comportement, il faut comprendre plus en détail comment sont passés les arguments à une fonction et faire une distinction entre les objets <em>mutables</em> et <em>immutables</em>.</p>
<ul class="simple">
<li><p>Lors de l’exécution des instructions <code class="code docutils literal notranslate"><span class="pre">f(a)</span></code> et <code class="code docutils literal notranslate"><span class="pre">g(lst)</span></code>, les emplacements en mémoire dans lesquels sont stockés les objets associés aux variables <code class="code docutils literal notranslate"><span class="pre">a</span></code> et <code class="code docutils literal notranslate"><span class="pre">lst</span></code> (c’est-à-dire l’entier <code class="code docutils literal notranslate"><span class="pre">2</span></code> et la lst <code class="code docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2]</span></code>) sont passés aux fonctions <code class="code docutils literal notranslate"><span class="pre">f</span></code> et <code class="code docutils literal notranslate"><span class="pre">g</span></code> et les paramètres <code class="code docutils literal notranslate"><span class="pre">x</span></code> et <code class="code docutils literal notranslate"><span class="pre">li</span></code> pointent alors vers ces emplacements en mémoire.</p></li>
<li><p>Puisqu’un entier est un objet immutable, l’instruction <code class="code docutils literal notranslate"><span class="pre">x</span> <span class="pre">+=</span> <span class="pre">1</span></code> fait pointer le paramètre <code class="code docutils literal notranslate"><span class="pre">x</span></code> vers un nouvel emplacement mémoire où est stocké l’entier <code class="code docutils literal notranslate"><span class="pre">3</span></code>. Cependant, a variable <code class="code docutils literal notranslate"><span class="pre">a</span></code> pointe toujours vers l’ancien emplacement en mémoire et est donc toujours associée à l’entier <code class="code docutils literal notranslate"><span class="pre">2</span></code>.</p></li>
</ul>
<div class="figure">
<p><img src="_images/tikz-81a98fa821a20ed3a4607555fef05e45a89689f6.png" alt="\node[rectangle,draw,pin={[draw,circle]120:a}](init){2};
\node[rectangle,draw,pin={[draw,circle]90:a},pin={[draw,circle]-90:x}](beginfunc)[right=3cm of init]{2};
\node[rectangle,draw,pin={[draw,circle]90:a}](a endfunc)[right=3cm of beginfunc]{2};
\node[rectangle,draw,pin={[draw,circle]-90:x}](x endfunc)[below=1cm of a endfunc]{3};
\node[rectangle,draw,pin={[draw,circle]60:a}](final)[right=3cm of a endfunc]{2};
\draw[-fast cap,shorten &lt;=10pt,shorten &gt;=10pt,&gt;=latex, blue!20!white, line width=10pt](init) --node[midway,above]{Appel f(a)} (beginfunc);
\draw[-fast cap,shorten &lt;=10pt,shorten &gt;=10pt,&gt;=latex, blue!20!white, line width=10pt](beginfunc) --node[midway,above]{x += 1} (a endfunc);
\draw[-fast cap,shorten &lt;=10pt,shorten &gt;=10pt,&gt;=latex, blue!20!white, line width=10pt](a endfunc) --node[midway,above]{Sortie de f} (final);" /></p>
</div><ul class="simple">
<li><p>Par contre, une liste étant un objet mutable, l’instruction <code class="code docutils literal notranslate"><span class="pre">li.append(3)</span></code> modifie l’objet stocké à l’emplacement en mémoire vers lequel pointe <code class="code docutils literal notranslate"><span class="pre">li</span></code>. Cet objet vaut alors <code class="code docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>. Mais la variable <code class="code docutils literal notranslate"><span class="pre">lst</span></code> pointe toujours vers le même emplacement en mémoire et est donc associé à cet objet modifié.</p></li>
</ul>
<div class="figure">
<p><img src="_images/tikz-27267dbd617b1660bc6414d7cc6fb29b22c295c2.png" alt="\node[rectangle,draw,pin={[draw,circle]120:lst}](init){[1, 2]};
\node[rectangle,draw,pin={[draw,circle]90:lst},pin={[draw,circle]-90:li}](beginfunc)[right=3cm of init]{[1, 2]};
\node[rectangle,draw,pin={[draw,circle]90:lst},pin={[draw,circle]-90:li}](endfunc)[right=3cm of beginfunc]{[1, 2, 3]};
\node[rectangle,draw,pin={[draw,circle]60:lst}](final)[right=3cm of endfunc]{[1, 2, 3]};
\draw[-fast cap,shorten &lt;=10pt,shorten &gt;=10pt,&gt;=latex, blue!20!white, line width=10pt](init) --node[midway,above]{Appel g(lst)} (beginfunc);
\draw[-fast cap,shorten &lt;=10pt,shorten &gt;=10pt,&gt;=latex, blue!20!white, line width=10pt](beginfunc) --node[midway,above]{li.append(3)} (endfunc);
\draw[-fast cap,shorten &lt;=10pt,shorten &gt;=10pt,&gt;=latex, blue!20!white, line width=10pt](endfunc) --node[midway,above]{Sortie de g} (final);" /></p>
</div><p>On se convaincra plus facilement en utilisant la fonction <code class="code docutils literal notranslate"><span class="pre">id</span></code> qui renvoie l’emplacement où est stocké un objet en mémoire et l’opérateur <code class="code docutils literal notranslate"><span class="pre">is</span></code> qui teste si deux objets sont physiquement égaux (c’est-à-dire s’ils occupent le même emplacement en mémoire).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">67</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x début fonction f&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">a</span><span class="p">)</span>
   <span class="o">....</span><span class="p">:</span>     <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
   <span class="o">....</span><span class="p">:</span>     <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x fin fonction f&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">a</span><span class="p">)</span>
   <span class="o">....</span><span class="p">:</span> 
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">68</span><span class="p">]:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">69</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a avant appel fonction f&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="n">a</span> <span class="n">avant</span> <span class="n">appel</span> <span class="n">fonction</span> <span class="n">f</span> <span class="mi">140720452916928</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">70</span><span class="p">]:</span> <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">x</span> <span class="n">début</span> <span class="n">fonction</span> <span class="n">f</span> <span class="mi">140720452916928</span> <span class="kc">True</span>
<span class="n">x</span> <span class="n">fin</span> <span class="n">fonction</span> <span class="n">f</span> <span class="mi">140720452916960</span> <span class="kc">False</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">71</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a après appel fonction f&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="n">a</span> <span class="n">après</span> <span class="n">appel</span> <span class="n">fonction</span> <span class="n">f</span> <span class="mi">140720452916928</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">72</span><span class="p">]:</span> <span class="n">a</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">72</span><span class="p">]:</span> <span class="mi">2</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">73</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">li</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;li début fonction g&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="n">li</span><span class="p">),</span> <span class="n">lst</span> <span class="ow">is</span> <span class="n">li</span><span class="p">)</span>
   <span class="o">....</span><span class="p">:</span>     <span class="n">li</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;toto&#39;</span><span class="p">)</span>
   <span class="o">....</span><span class="p">:</span>     <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;li fin fonction g&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="n">li</span><span class="p">),</span> <span class="n">lst</span> <span class="ow">is</span> <span class="n">li</span><span class="p">)</span>
   <span class="o">....</span><span class="p">:</span> 
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">74</span><span class="p">]:</span> <span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">75</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;lst avant appel fonction g&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="n">lst</span><span class="p">))</span>
<span class="n">lst</span> <span class="n">avant</span> <span class="n">appel</span> <span class="n">fonction</span> <span class="n">g</span> <span class="mi">2325456039424</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">76</span><span class="p">]:</span> <span class="n">g</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
<span class="n">li</span> <span class="n">début</span> <span class="n">fonction</span> <span class="n">g</span> <span class="mi">2325456039424</span> <span class="kc">True</span>
<span class="n">li</span> <span class="n">fin</span> <span class="n">fonction</span> <span class="n">g</span> <span class="mi">2325456039424</span> <span class="kc">True</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">77</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;lst après appel fonction g&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="n">lst</span><span class="p">))</span>
<span class="n">lst</span> <span class="n">après</span> <span class="n">appel</span> <span class="n">fonction</span> <span class="n">g</span> <span class="mi">2325456039424</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">78</span><span class="p">]:</span> <span class="n">lst</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">78</span><span class="p">]:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;toto&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Finalement, on peut résumer les choses de la manière suivante.</p>
<div class="admonition tip">
<p class="admonition-title">Astuce</p>
<p>Un objet mutable peut-être modifé s’il est passé en argument à une fonction alors que ce ne sera jamais le cas pour un objet immutable.</p>
</div>
<p>Enfin, soulignons qu’il peut se passer des choses étranges lorsque l’on utilise des <em>arguments par défaut mutables</em>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">79</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">pizza</span><span class="p">(</span><span class="n">supplements</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;jambon&#39;</span><span class="p">,</span> <span class="s1">&#39;fromage&#39;</span><span class="p">]):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="n">base</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">supplements</span><span class="p">)</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">base</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="c1"># Jusqu&#39;ici tout va bien</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">80</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="n">pizza</span><span class="p">([</span><span class="s1">&#39;pepperoni&#39;</span><span class="p">,</span> <span class="s1">&#39;poivrons&#39;</span><span class="p">]))</span>
<span class="p">[</span><span class="s1">&#39;jambon&#39;</span><span class="p">,</span> <span class="s1">&#39;fromage&#39;</span><span class="p">,</span> <span class="s1">&#39;pepperoni&#39;</span><span class="p">,</span> <span class="s1">&#39;poivrons&#39;</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">81</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="n">pizza</span><span class="p">([</span><span class="s1">&#39;champignons&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;jambon&#39;</span><span class="p">]))</span>
<span class="p">[</span><span class="s1">&#39;jambon&#39;</span><span class="p">,</span> <span class="s1">&#39;champignons&#39;</span><span class="p">]</span>

<span class="c1"># Ca devient bizarre</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">82</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="n">pizza</span><span class="p">([</span><span class="s1">&#39;anchois&#39;</span><span class="p">,</span> <span class="s1">&#39;olives&#39;</span><span class="p">]))</span>
<span class="p">[</span><span class="s1">&#39;jambon&#39;</span><span class="p">,</span> <span class="s1">&#39;fromage&#39;</span><span class="p">,</span> <span class="s1">&#39;pepperoni&#39;</span><span class="p">,</span> <span class="s1">&#39;poivrons&#39;</span><span class="p">,</span> <span class="s1">&#39;anchois&#39;</span><span class="p">,</span> <span class="s1">&#39;olives&#39;</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">83</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="n">pizza</span><span class="p">([</span><span class="s1">&#39;champignons&#39;</span><span class="p">]))</span>
<span class="p">[</span><span class="s1">&#39;jambon&#39;</span><span class="p">,</span> <span class="s1">&#39;fromage&#39;</span><span class="p">,</span> <span class="s1">&#39;pepperoni&#39;</span><span class="p">,</span> <span class="s1">&#39;poivrons&#39;</span><span class="p">,</span> <span class="s1">&#39;anchois&#39;</span><span class="p">,</span> <span class="s1">&#39;olives&#39;</span><span class="p">,</span> <span class="s1">&#39;champignons&#39;</span><span class="p">]</span>

<span class="c1"># Ca redevient normal</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">84</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="n">pizza</span><span class="p">([</span><span class="s1">&#39;anchois&#39;</span><span class="p">,</span> <span class="s1">&#39;olives&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;jambon&#39;</span><span class="p">,</span> <span class="s1">&#39;oeuf&#39;</span><span class="p">,</span> <span class="s1">&#39;fromage&#39;</span><span class="p">]))</span>
<span class="p">[</span><span class="s1">&#39;jambon&#39;</span><span class="p">,</span> <span class="s1">&#39;oeuf&#39;</span><span class="p">,</span> <span class="s1">&#39;fromage&#39;</span><span class="p">,</span> <span class="s1">&#39;anchois&#39;</span><span class="p">,</span> <span class="s1">&#39;olives&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Il faut comprendre que la liste servant d’argument par défaut est créée une fois pour toute <em>à la déclaration de la fonction</em> et non à chaque appel de la fonction. Comme il s’agit d’un objet mutable, chaque appel de la fonction modifie cette liste. A chaque appel de la fonction, c’est donc cette nouvelle liste qui sert d’argument par défaut et non celle définie dans l’en-tête de la fonction.</p>
</div>
<div class="section" id="une-fonction-est-un-objet">
<h2><span class="section-number">4.4.6. </span>Une fonction est un objet<a class="headerlink" href="#une-fonction-est-un-objet" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est important de noter qu’en Python, les fonctions sont des objets commes les autres (entiers, tuples, …). Notamment, une fonction possède un type.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">85</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">86</span><span class="p">]:</span> <span class="nb">type</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">86</span><span class="p">]:</span> <span class="n">function</span>
</pre></div>
</div>
<p>Ceci est important car on peut par exemple utiliser une fonction comme un argument d’une autre fonction.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">87</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">appliquer</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">88</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">89</span><span class="p">]:</span> <span class="n">appliquer</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">89</span><span class="p">]:</span> <span class="mi">10</span>
</pre></div>
</div>
<p>On peut également créer une fonction qui renvoie une autre fonction.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">90</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">multiplier_par</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>         <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">x</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">f</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">91</span><span class="p">]:</span> <span class="n">multiplier_par</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">91</span><span class="p">]:</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
<div class="section" id="documentation-d-une-fonction">
<h2><span class="section-number">4.4.7. </span>Documentation d’une fonction<a class="headerlink" href="#documentation-d-une-fonction" title="Lien permanent vers ce titre">¶</a></h2>
<p>La plupart des fonctions disponibles de manière standard dans Python ou dans des modules « officiels » sont documentées. On accède à la documentation d’une fonction via la fonction <code class="code docutils literal notranslate"><span class="pre">help</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">92</span><span class="p">]:</span> <span class="n">help</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span>
<span class="n">Help</span> <span class="n">on</span> <span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="nb">len</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">builtins</span><span class="p">:</span>

<span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span>
    <span class="n">Return</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">items</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">container</span><span class="o">.</span>


<span class="n">In</span> <span class="p">[</span><span class="mi">93</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">exp</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">94</span><span class="p">]:</span> <span class="n">help</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
<span class="n">Help</span> <span class="n">on</span> <span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="n">exp</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">math</span><span class="p">:</span>

<span class="n">exp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span>
    <span class="n">Return</span> <span class="n">e</span> <span class="n">raised</span> <span class="n">to</span> <span class="n">the</span> <span class="n">power</span> <span class="n">of</span> <span class="n">x</span><span class="o">.</span>
</pre></div>
</div>
<p>Quand on définit ses propres fonctions, il faut prendre également prendre l’habitude de les documenter. Il s’agit :</p>
<ul class="simple">
<li><p>de définir l’action de la fonction;</p></li>
<li><p>de préciser le type des paramètres ;</p></li>
<li><p>de spécifier le cas échéant la valeur de retour et son type.</p></li>
</ul>
<p>On documente une fonction à l’aide d’une chaîne de caractère spéciale appelée <strong>docstring</strong> placée directement sous l’entête de la fonction. Comme pour les fonctions prédéfinies, on peut accéder à la documentation de ses propres fonctions via la fonction <code class="code docutils literal notranslate"><span class="pre">help</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">95</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">minimum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">   ....:     Calcule le minimum de a et b</span>
<span class="s2">   ....:     Paramètres : deux valeurs numériques a et b</span>
<span class="s2">   ....:     Revoie : le plus petit des deux entiers a et b</span>
<span class="s2">   ....:     &quot;&quot;&quot;</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">:</span>
   <span class="o">....</span><span class="p">:</span>         <span class="k">return</span> <span class="n">a</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">b</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">96</span><span class="p">]:</span> <span class="n">help</span><span class="p">(</span><span class="n">minimum</span><span class="p">)</span>
<span class="n">Help</span> <span class="n">on</span> <span class="n">function</span> <span class="n">minimum</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">__main__</span><span class="p">:</span>

<span class="n">minimum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="n">Calcule</span> <span class="n">le</span> <span class="n">minimum</span> <span class="n">de</span> <span class="n">a</span> <span class="n">et</span> <span class="n">b</span>
    <span class="n">Paramètres</span> <span class="p">:</span> <span class="n">deux</span> <span class="n">valeurs</span> <span class="n">numériques</span> <span class="n">a</span> <span class="n">et</span> <span class="n">b</span>
    <span class="n">Revoie</span> <span class="p">:</span> <span class="n">le</span> <span class="n">plus</span> <span class="n">petit</span> <span class="n">des</span> <span class="n">deux</span> <span class="n">entiers</span> <span class="n">a</span> <span class="n">et</span> <span class="n">b</span>
</pre></div>
</div>
<p>Le fait de documenter ses fonctions peut sembler être une perte de temps au premier abord. Mais la documentation est essentielle pour au moins deux raisons.</p>
<ul class="simple">
<li><p>Il faut penser que d’autres personnes voudront utiliser votre code : elles ne sont pas censées se plonger dans votre code pour deviner à quoi servent vos fonction et comment les utiliser.</p></li>
<li><p>Si vous vous replongez quelques mois après dans votre code pour débugger ou améliorer vos fonctions, il y a de fortes chances que vous ne vous vous souveniez plus de vos intentions au moment où vous les avez écrites.</p></li>
</ul>
<p>En plus de la docstring, il peut être utile de documenter une fonction à l’aide de commentaires.</p>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">À faire</p>
<p>renvoyer vers commentaires</p>
</div>
</div>
<div class="section" id="effets-de-bord">
<h2><span class="section-number">4.4.8. </span>Effets de bord<a class="headerlink" href="#effets-de-bord" title="Lien permanent vers ce titre">¶</a></h2>
<p>En plus de renvoyer une valeur, une fonction peut entraîner des modifications au-delà de sa portée comme :</p>
<ul class="simple">
<li><p>modifier des variables globales ;</p></li>
<li><p>modifier des arguments mutables ;</p></li>
<li><p>afficher des informations à l’écran ;</p></li>
<li><p>enregistrer des données dans un fichier.</p></li>
</ul>
<p>On parle alors d'<strong>effet de bord</strong>.</p>
<p>Voici une fonction avec effet de bord. Elle modifie en effet la variable globale <code class="code docutils literal notranslate"><span class="pre">x</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">97</span><span class="p">]:</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">98</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">add</span><span class="p">():</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">global</span> <span class="n">x</span>
   <span class="o">....</span><span class="p">:</span>     <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="mi">3</span>
   <span class="o">....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">99</span><span class="p">]:</span> <span class="n">add</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">99</span><span class="p">]:</span> <span class="mi">3</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">100</span><span class="p">]:</span> <span class="n">x</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">100</span><span class="p">]:</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Voici une fonction sans effet de bord.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">101</span><span class="p">]:</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">102</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
   <span class="o">.....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">1</span>
   <span class="o">.....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">103</span><span class="p">]:</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">104</span><span class="p">]:</span> <span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">104</span><span class="p">]:</span> <span class="mi">2</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">105</span><span class="p">]:</span> <span class="n">x</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">105</span><span class="p">]:</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Les effets de bord sont à utiliser avec parcimonie : en effet, une fonction sans effet de bord aura toujours le même comportement si on lui fournit les mêmes arguments alors que ce n’est pas forcément le cas pour une fonction avec effet de bord. Lorsque l’on manipule des fonctions avec effets de bord, il peut être difficile de deviner quels sont leurs effects exacts sur l’état du programme.</p>
</div>
<div class="section" id="fonctions-anonymes">
<h2><span class="section-number">4.4.9. </span>Fonctions anonymes<a class="headerlink" href="#fonctions-anonymes" title="Lien permanent vers ce titre">¶</a></h2>
<p>En mathématiques, on peut parler d’une fonction de plusieurs manières.</p>
<blockquote>
<div><ul class="simple">
<li><p>On peut lui donner un nom : on peut par exemple considérer la fonction <span class="math notranslate nohighlight">\(f\)</span> telle que <span class="math notranslate nohighlight">\(f(x)=x^2\)</span>.</p></li>
<li><p>Mais si on ne compte pas réutiliser plus tard cette fonction, on peut tout simplement parler de la fonction <span class="math notranslate nohighlight">\(x\mapsto x^2\)</span>.</p></li>
</ul>
</div></blockquote>
<p>De la même manière, on peut nommer explicitement une fonction.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
<p>On peut également utiliser une <em>fonction anonyme</em> (également appelée <em>fonction lambda</em>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">106</span><span class="p">]:</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">106</span><span class="p">]:</span> <span class="mi">16</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">107</span><span class="p">]:</span> <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>              <span class="c1"># On peut bien sûr donner un nom à une fonction anonyme</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">108</span><span class="p">]:</span> <span class="n">f</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">108</span><span class="p">]:</span> <span class="mi">16</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">109</span><span class="p">]:</span> <span class="n">g</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span>    <span class="c1"># Une fonction anonyme peut avoir plus d&#39;un argument</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">110</span><span class="p">]:</span> <span class="n">g</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">110</span><span class="p">]:</span> <span class="mi">5</span>
</pre></div>
</div>
<p>De manière générale, la syntaxe d’une fonction anonyme est la suivante.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">lambda</span> <span class="o">&lt;</span><span class="n">paramètres</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>A la différence d’une fonction classique, une fonction anonyme ne nécessite pas d’instruction <code class="code docutils literal notranslate"><span class="pre">return</span></code> : l’expression suivant <code class="code docutils literal notranslate"><span class="pre">:</span></code> est renvoyée <a class="footnote-reference brackets" href="#fctanonyme" id="id3">2</a>.</p>
<p>Les fonctions anonymes sont limitées par rapport aux fonctions classiques : elles ne peuvent pas exécuter plusieurs instructions puisque seule <strong>une</strong> expression est renvoyée. Quel est alors l’intérêt des fonctions anonymes ? Il s’agit de créer des fonctions à usage unique qui peuvent notamment servir d’arguments dans d’autres fonctions.</p>
<p>Par exemple, Python dispose d’une fonction <code class="code docutils literal notranslate"><span class="pre">map</span></code> qui permet d’appliquer une fonction à chaque élément d’un objet de type itérable.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">111</span><span class="p">]:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>   <span class="c1"># la fonction map renvoie un objet de type map qu&#39;on convertit en liste</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">111</span><span class="p">]:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<p>Bien entendu, on arriverait plus aisément au même résultat grâce à une liste en compréhension.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">112</span><span class="p">]:</span> <span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">112</span><span class="p">]:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<dl class="footnote brackets">
<dt class="label" id="zeroparametre"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Une fonction sans paramètre nécessite quand même des parenthèses dans son en-tête.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">113</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
   <span class="o">.....</span><span class="p">:</span>     <span class="k">return</span> <span class="mi">1</span>
   <span class="o">.....</span><span class="p">:</span> 

<span class="n">In</span> <span class="p">[</span><span class="mi">114</span><span class="p">]:</span> <span class="n">f</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">114</span><span class="p">]:</span> <span class="mi">1</span>
</pre></div>
</div>
</dd>
<dt class="label" id="fctanonyme"><span class="brackets"><a class="fn-backref" href="#id3">2</a></span></dt>
<dd><p>Une fonction anonyme peut également avoir des effets de bord.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">115</span><span class="p">]:</span> <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">li</span><span class="p">:</span> <span class="n">li</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;toto&#39;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">116</span><span class="p">]:</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">117</span><span class="p">]:</span> <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">118</span><span class="p">]:</span> <span class="n">a</span>               <span class="c1"># La fonction anonyme f a modifié la liste a</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">118</span><span class="p">]:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;toto&#39;</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">119</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>     <span class="c1"># Par contre, la fonction ne renvoie rien (en fait, renvoie None)</span>
<span class="kc">None</span>
</pre></div>
</div>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="theorie.html" class="btn btn-neutral float-right" title="5. Un peu de théorie" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="boucles.html" class="btn btn-neutral float-left" title="4.3. Boucles" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Laurent Garcin

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>